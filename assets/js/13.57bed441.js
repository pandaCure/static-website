(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{267:function(t,e,n){"use strict";n.r(e);var a=n(28),s=Object(a.a)({},(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"javascript-string-ç±»å‹"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#javascript-string-ç±»å‹"}},[t._v("#")]),t._v(" javascript String ç±»å‹")]),t._v(" "),n("p",[t._v("åœ¨ JavaScript ä¸­å¤„ç†ä¸­æ–‡å’Œå…¶ä»– Unicode å­—ç¬¦æ—¶ï¼Œæˆ‘ä»¬ä¼šç”¨åˆ°å¤„ç† Unicode ç›¸å…³çš„ APIã€‚")]),t._v(" "),n("p",[t._v("åœ¨æ—©æœŸï¼ŒJavaScript æä¾›çš„ String.prototype.charCodeAt å’Œ String.fromCharCode å°±æ˜¯èƒ½å¤Ÿå°†å­—ç¬¦ä¸²è½¬æ¢ä¸º Unicode çš„ UTF-16 ç¼–ç ä»¥åŠä» UTF-16 ç¼–ç è½¬æ¢ä¸ºå­—ç¬¦ä¸²çš„å‡½æ•°ã€‚")]),t._v(" "),n("h2",{attrs:{id:"å­—ç¬¦ä¸²è½¬æ¢ä¸ºå¯¹åº”çš„-unicode-ç¼–ç "}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å­—ç¬¦ä¸²è½¬æ¢ä¸ºå¯¹åº”çš„-unicode-ç¼–ç "}},[t._v("#")]),t._v(" å­—ç¬¦ä¸²è½¬æ¢ä¸ºå¯¹åº”çš„ Unicode ç¼–ç ")]),t._v(" "),n("p",[t._v("æ¯”å¦‚ï¼š")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("const str = 'ä¸­æ–‡';\n\nconsole.log([...str].map(char => char.charCodeAt(0)));\n// [20013, 25991]\n")])])]),n("p",[t._v("è¿™é‡Œæˆ‘ä»¬å°†å­—ç¬¦ä¸²å±•å¼€æˆå•ä¸ªå­—ç¬¦ï¼Œå†é€šè¿‡ charCodeAt æ–¹æ³•å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºå¯¹åº”çš„ Unicode ç¼–ç ï¼Œè¿™é‡Œçš„ 20013 å’Œ 25991 å°±æ˜¯â€œä¸­æ–‡â€ä¸¤ä¸ªå­—å¯¹åº”çš„ Unicode ç¼–ç ã€‚")]),t._v(" "),n("p",[t._v("åŒæ ·ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ fromCharCode å°† Unicode ç¼–ç è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼š")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("const charCodes = [20013, 25991];\n\nconsole.log(String.fromCharCode(...charCodes)); // ä¸­æ–‡\n")])])]),n("p",[t._v("è¿™ä¸¤ä¸ªæ–¹æ³•ç›¸ä¿¡å¤§éƒ¨åˆ†åŒå­¦éƒ½ä¸é™Œç”Ÿï¼Œè¿™æ˜¯ä» ES3 å°±å¼€å§‹æ”¯æŒçš„æ–¹æ³•ã€‚ä½†æ˜¯ï¼Œè¿™ä¸ªæ–¹æ³•åœ¨ä»Šå¤©æˆ‘ä»¬å¤„ç† Unicode å­—ç¬¦æ—¶ä¸å¤Ÿç”¨äº†ã€‚")]),t._v(" "),n("p",[t._v("ä¸ºä»€ä¹ˆå‘¢ï¼Ÿæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ä¾‹å­ï¼š")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("const str = 'ğŸ€„';\n\nconsole.log(str.charCodeAt(0)); // 55356\n")])])]),n("p",[t._v("è¿™ä¸ªå­—ç¬¦æ˜¯æˆ‘ä»¬ç†Ÿæ‚‰çš„éº»å°†ä¸­çš„çº¢ä¸­ï¼Œç°åœ¨å¾ˆå¤šè¾“å…¥æ³•éƒ½èƒ½ç›´æ¥æ‰“å‡ºæ¥ï¼Œçœ‹ä¸Šå»ä¼¼ä¹ä¹Ÿæ­£å¸¸ï¼Œæ²¡ä»€ä¹ˆé—®é¢˜å•Šï¼Ÿ")]),t._v(" "),n("p",[t._v("å¯ä½ å†è¯•è¯•ï¼š")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("console.log(String.fromCharCode(55356)); // ï¿½\n")])])]),n("p",[t._v("å®é™…ä¸Š Unicode å­—ç¬¦ ğŸ€„ çš„ UTF-16 ç¼–ç å¹¶ä¸æ˜¯ 55356ï¼Œè¿™æ—¶å€™å¦‚æœä½ ä½¿ç”¨ charCodeAt æ¥å¾—åˆ°å­—ç¬¦ ğŸ€„ çš„ UTF-16 ç¼–ç ï¼Œåº”è¯¥è¦åˆ°ä¸¤ä¸ªå€¼ï¼š")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("const str = 'ğŸ€„';\n\nconsole.log(str.charCodeAt(0), str.charCodeAt(1)); // 55356 56324\n")])])]),n("p",[t._v("å¯¹åº”çš„ String.fromCharCode(55356, 56324)æ‰èƒ½è¿˜åŸ ğŸ€„ å­—ç¬¦ã€‚")]),t._v(" "),n("p",[t._v("é™¤æ­¤ä»¥å¤–ï¼Œè¿˜æœ‰å…¶ä»–ä¸€äº›ä¸ä¸€æ ·çš„åœ°æ–¹ï¼Œæ¯”å¦‚ï¼š")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("console.log('ğŸ€„'.length); // å­—ç¬¦ä¸²é•¿åº¦ä¸º2\n'ğŸ€„'.split(''); // [\"ï¿½\", \"ï¿½\"] split å‡ºæ¥ä¸¤ä¸ªå­—ç¬¦\n/^.$/.test('ğŸ€„'); // false\n")])])]),n("p",[t._v("æ‰€ä»¥æˆ‘ä»¬ä» Unicode è¯´èµ·ã€‚ä½œä¸ºä¸€ä¸ªç¨‹åºå‘˜ï¼Œæˆ‘ä»¬éƒ½åº”è¯¥æˆ–å¤šæˆ–å°‘äº†è§£å…¶ç›¸å…³çŸ¥è¯†ã€‚")]),t._v(" "),n("p",[t._v("ä¸–ç•Œä¸Šæœ‰é‚£ä¹ˆå¤šè¯­è¨€ç³»ç»Ÿï¼Œæ¯é—¨è¯­è¨€åˆæœ‰é‚£å¤šæ–‡å­—å­—ç¬¦ã€‚")]),t._v(" "),n("p",[t._v("ä¸ºäº†åœ¨è®¡ç®—æœºä¸Šè¡¨ç¤ºè¿™äº›å­—ç¬¦ï¼Œä¸€ä¸ªå¤©ç„¶çš„æƒ³æ³•å°±æ˜¯ç»™æ¯ä¸ªå­—ç¬¦ä¸€ä¸ªç¼–å·ã€‚æŠŠæ¯ä¸€ä¸ªå­—ç¬¦æ˜ å°„æˆä¸€ä¸ªæ•´æ•°ï¼Œè¿™äº›æ•°å­—çš„å­¦åå«ç ä½ï¼ˆcode pointï¼‰ã€‚æ¯”å¦‚ï¼š")]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'a'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("charCodeAt")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 97")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'å§š'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("charCodeAt")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 23002å¤åˆ¶ä»£ç ")]),t._v("\n")])])]),n("h2",{attrs:{id:"unicode"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#unicode"}},[t._v("#")]),t._v(" Unicode")]),t._v(" "),n("p",[t._v("ç©¶ç«Ÿå¾—å¤šå°‘ä¸ªç ä½æ‰å¤Ÿå‘¢ï¼Ÿåˆšå¼€å§‹ Unicode è®¾è®¡äººå‘˜è§‰å¾— 2^16 (65536)å°±è¯¥è¶³å¤Ÿäº†ï¼Œäºæ˜¯äº§ç”Ÿäº† UCS-2ã€‚ï¼ˆæ³¨ï¼šäº‹å®ä¸Š Unicode å’Œ UCS åœ¨æœ€å¼€å§‹æ—¶ä¸æ˜¯ä¸€å®¶ã€‚ï¼‰")]),t._v(" "),n("p",[t._v("å– 16 æ¬¡æ–¹ï¼Œå³è¯´æ˜ 2 ä¸ªå­—èŠ‚æ•°æ®å°±èƒ½è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦äº†ã€‚è¿™ç§ç¼–ç æ–¹å¼å¤šç®€å•ï¼Œä¸ç®¡æ˜¯ä»æ€§èƒ½è¿˜æ˜¯ä»å®ç°ä¸Šæ¥è¯´ï¼Œéƒ½çœ‹èµ·æ¥æ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ã€‚å› æ­¤ï¼Œå¾ˆå¤šè¯­è¨€éƒ½é‡‡ç”¨äº† 16 ä½ç¼–ç çš„å­—ç¬¦ä¸²ï¼ŒåŒ…æ‹¬å’±ä»¬çš„ JavaScriptã€‚")]),t._v(" "),n("p",[t._v("è™½ç„¶ 6 ä¸‡å¤šä¸ªå­—ç¬¦è¶³ä»¥åŒ…æ‹¬ä¸–ç•Œä¸Šç»å¤§å¤šæ•°å¸¸ç”¨å­—ç¬¦ï¼Œä½†äº‹å®ä¸Šè¿˜æ˜¯ä¸å¤Ÿçš„ï¼ŒUnicode ä¸æ–­æ‰©å±•ã€‚æˆªæ­¢ 2019 å¹´ 3 æœˆï¼Œå·²æ”¶å…¥ 150 ä¸ªä¹¦å†™ç³»ç»Ÿï¼Œå…±è®¡å­—ç¬¦ 137928 çš„ã€‚")]),t._v(" "),n("p",[t._v("ç»Ÿä¸€ç”¨ä¸¤ä¸ªå­—èŠ‚æ¥å­˜å‚¨ä¸€ä¸ªå­—ç¬¦ï¼Œè¿™ç§æ–¹å¼ä¸å†ä¸€ç›´æœ‰æ•ˆã€‚å› æ­¤å‡ºç°äº†ä¸åŒçš„ç¼–ç æ ‡å‡†ï¼Œæ¯”å¦‚ UTF-8ã€UTF-16 å’Œ UTF-32ã€‚")]),t._v(" "),n("p",[t._v("è¿™é‡Œä¸»è¦è¯´è¯´ä¸ JS ç›¸å…³çš„ UTF-16ã€‚")]),t._v(" "),n("p",[t._v("UTF-16 æ˜¯ä¸€ç§å˜é•¿è¡¨ç¤ºï¼Œå®ƒå¯¹æ¥è‡ªå¸¸ç”¨å­—ç¬¦ UCS-2 çš„ç ä½ï¼Œä»ç„¶ç”¨ 2 ä¸ªå­—èŠ‚è¡¨ç¤ºã€‚è€Œå¯¹æ¥æ–°å¢éå¸¸ç”¨çš„ç ä½å´ç”¨ 4 ä¸ªå­—èŠ‚è¡¨ç¤ºã€‚äºŒè€…èƒ½äº’ç›¸åŒºåˆ†å¼€æ¥ï¼Œè¿™æ˜¯ UTF-16 çš„ç²¾å¦™ä¹‹å¤„æ‰€åœ¨ã€‚")]),t._v(" "),n("p",[t._v("ğŸ‘‰ğŸ» çŸ¥è¯†ç‚¹ï¼šUnicode æ ‡å‡†ä¸­ï¼Œå°†å­—ç¬¦ç¼–ç çš„ç ä½ä»¥ 2**16 ä¸ªä¸ºä¸€ç»„ï¼Œç»„æˆä¸ºä¸€ä¸ªå¹³é¢ï¼ˆPlaneï¼‰ï¼ŒæŒ‰ç…§å­—ç¬¦çš„ç ä½å€¼ï¼Œåˆ†ä¸º 17 ä¸ªå¹³é¢ï¼Œæ‰€æœ‰ç ä½ä» 0x000000 åˆ° 0x10FFFFï¼Œæ€»å…±ä½¿ç”¨ 3 ä¸ªå­—èŠ‚ã€‚")]),t._v(" "),n("p",[t._v("å…¶ä¸­æœ€å‰é¢çš„ 1 ä¸ªå­—èŠ‚æ˜¯å¹³é¢ç¼–å·ï¼Œä» 0x0 åˆ° 0x10ï¼Œä¸€å…± 17 ä¸ªå¹³é¢ã€‚")]),t._v(" "),n("p",[t._v("ç¬¬ 0 å·å¹³é¢è¢«ç§°ä¸ºåŸºæœ¬å¤šæ–‡ç§å¹³é¢ï¼ˆBMPï¼ŒBasic Multilingual Planeï¼‰ï¼Œè¿™ä¸ªå¹³é¢çš„æ‰€æœ‰å­—ç¬¦ç ä½åªéœ€è¦ 16 ä½ç¼–ç å•å…ƒå³å¯è¡¨ç¤ºï¼Œæ‰€ä»¥å®ƒä»¬å¯ä»¥ç»§ç»­ä½¿ç”¨ UTF-16 ç¼–ç ã€‚")]),t._v(" "),n("p",[t._v("å…¶ä»–çš„å¹³é¢è¢«ç§°ä¸ºè¾…åŠ©å¹³é¢ï¼ˆsupplementary planeï¼‰ï¼Œè¿™äº›å¹³é¢çš„å­—ç¬¦è¢«ç§°ä¸ºå¢è¡¥å­—ç¬¦ï¼Œå®ƒä»¬çš„ç ä½å‡è¶…è¿‡ 16 ä½èŒƒå›´ã€‚")]),t._v(" "),n("p",[t._v("ES5 åŠä¹‹å‰çš„ JavaScript çš„ Unicode ç›¸å…³ APIï¼Œåªèƒ½ä»¥ UTF-16 æ¥å¤„ç† BMP çš„å­—ç¬¦ï¼Œæ‰€æœ‰å­—ç¬¦ä¸²çš„æ“ä½œéƒ½æ˜¯åŸºäº 16 ä½ç¼–ç å•å…ƒã€‚")]),t._v(" "),n("p",[t._v("å› æ­¤ï¼Œå½“ ğŸ€„ è¿™æ ·çš„å¢è¡¥å­—ç¬¦å‡ºç°æ—¶ï¼Œå¾—åˆ°çš„ç»“æœå°±ä¼šä¸é¢„æœŸä¸ç¬¦ã€‚")]),t._v(" "),n("p",[t._v("åœ¨ ES2015 ä¹‹åï¼ŒJavaScript æä¾›äº†æ–°çš„ API æ¥æ”¯æŒ Unicode ç ä½ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥è¿™ä¹ˆä½¿ç”¨ï¼š")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("const str = 'ğŸ€„';\n\nconsole.log(str.codePointAt(0)); // 126980\n")])])]),n("p",[t._v("ğŸ‘‰ğŸ» çŸ¥è¯†ç‚¹ï¼šString.prototype.codePointAt(index) æ–¹æ³•è¿”å›å­—ç¬¦ä¸²æŒ‡å®š index ä½ç½®çš„å­—ç¬¦çš„ Unicode ç ä½ï¼Œä¸æ—§çš„ charCodeAt æ–¹æ³•ç›¸æ¯”ï¼Œå®ƒèƒ½å¤Ÿå¾ˆå¥½åœ°æ”¯æŒå¢è¡¥å­—ç¬¦ã€‚")]),t._v(" "),n("p",[t._v("å¯¹åº”åœ°ï¼Œæˆ‘ä»¬æœ‰ String.fromCodePoint æ–¹æ³•å°† CodePoint è½¬ä¸ºå¯¹åº”çš„å­—ç¬¦ï¼š")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("console.log(String.fromCodePoint(126980)); // ğŸ€„\nUnicode è½¬ä¹‰\nJavaScriptå­—ç¬¦ä¸²æ”¯æŒUnicodeè½¬ä¹‰ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç”¨ç ä½çš„åå…­è¿›åˆ¶å­—ç¬¦ä¸²åŠ ä¸Šå‰ç¼€\\uæ¥è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ï¼Œä¾‹å¦‚ï¼š\n\nconsole.log('\\u4e2d\\u6587'); // ä¸­æ–‡\n0x4e2då’Œ0x6587åˆ†åˆ«æ˜¯20013å’Œ25991çš„åå…­è¿›åˆ¶è¡¨ç¤ºã€‚\n")])])]),n("p",[t._v("æ³¨æ„ï¼ŒUnicode è½¬ä¹‰ä¸ä»…ä»…å¯ä»¥ç”¨äºå­—ç¬¦ä¸²ï¼Œå®é™…ä¸Š\\uxxxx ä¹Ÿæ˜¯å¯ä»¥ç”¨åœ¨æ ‡è¯†ç¬¦ï¼Œå¹¶ç›¸äº’è½¬æ¢çš„ã€‚ä¾‹å¦‚æˆ‘ä»¬å¯ä»¥è¿™ä¹ˆå†™ï¼š")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("const \\u4e2d\\u6587 = 'æµ‹è¯•';\n\nconsole.log(ä¸­æ–‡); // æµ‹è¯•\n")])])]),n("p",[t._v("ä¸Šé¢çš„ä»£ç æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªä¸­æ–‡å˜é‡ï¼Œå£°æ˜çš„æ—¶å€™æˆ‘ä»¬ç”¨ Unicode è½¬ä¹‰ï¼Œconsole.log çš„æ—¶å€™ç”¨å®ƒçš„å˜é‡åå­—ç¬¦ï¼Œè¿™æ ·ä¹Ÿæ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚")]),t._v(" "),n("p",[t._v("\\u å’Œåå…­è¿›åˆ¶å­—ç¬¦çš„è¿™ç§è¡¨ç¤ºæ³•åŒæ ·åªé€‚ç”¨äº BMP çš„å­—ç¬¦ï¼Œæ‰€ä»¥å¦‚æœæˆ‘ä»¬è¯•å›¾ä½¿ç”¨å®ƒè½¬ä¹‰å¢è¡¥å­—ç¬¦ï¼Œç›´æ¥è¿™æ ·æ˜¯ä¸è¡Œçš„ï¼š")]),t._v(" "),n("p",[t._v("console.log('\\u1f004'); // á½†4\nè¿™æ ·ï¼Œå¼•æ“ä¼šæŠŠ\\u1f004 è§£ææˆå­—ç¬¦\\u1f00 å’Œé˜¿æ‹‰ä¼¯æ•°å­— 4 ç»„æˆçš„å­—ç¬¦ä¸²ã€‚æˆ‘ä»¬éœ€è¦ä½¿ç”¨{}å°†ç¼–ç åŒ…å«èµ·æ¥ï¼Œè¿™æ ·å°±å¯ä»¥äº†ï¼š")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("console.log('\\u{1f004}'); // ğŸ€„\n")])])]),n("h2",{attrs:{id:"ä»£ç†å¯¹ï¼ˆsurrogate-pairï¼‰"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ä»£ç†å¯¹ï¼ˆsurrogate-pairï¼‰"}},[t._v("#")]),t._v(" ä»£ç†å¯¹ï¼ˆsurrogate pairï¼‰")]),t._v(" "),n("p",[t._v("ä¸ºåŒºåˆ« BMP æ¥è¡¨ç¤ºè¾…åŠ©å¹³é¢ï¼ŒUnicode å¼•å…¥ä»£ç†å¯¹(surrogate pair)ï¼Œè§„å®šç”¨ 2 ä¸ª 16 ä½ç¼–ç å•å…ƒæ¥è¡¨ç¤ºä¸€ä¸ªç ä½ï¼Œå…·ä½“è§„åˆ™æ˜¯å°†ä¸€ä¸ªå­—ç¬¦æŒ‰å¦‚ä¸‹è¡¨ç¤ºï¼š")]),t._v(" "),n("p",[t._v("åœ¨ BMP å†…çš„å­—ç¬¦ï¼Œä»ç„¶æŒ‰ç…§ UTF-16 çš„ç¼–ç è§„åˆ™ï¼Œä½¿ç”¨ä¸¤ä¸ªå­—èŠ‚æ¥è¡¨ç¤ºã€‚\nå¢è¡¥å­—ç¬¦ä½¿ç”¨ä¸¤ç»„ 16 ä½ç¼–ç æ¥è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦è§„åˆ™ä¸ºï¼š\né¦–å…ˆå°†å®ƒçš„ç¼–ç å‡å» 0x10000\nç„¶åå†™æˆ yyyy yyyy yyxx xxxx xxxx çš„ 20 ä½äºŒè¿›åˆ¶å½¢å¼\nç„¶åç¼–ç ä¸º 110110yy yyyyyyyy 110111xx xxxxxxxx ä¸€å…± 4 ä¸ªå­—èŠ‚ã€‚\nå…¶ä¸­ 110110yyyyyyyyyy å’Œ 110111xxxxxxxxxx å°±æ˜¯ä¸¤ä¸ªä»£ç†å­—ç¬¦ï¼Œå½¢æˆä¸€ç»„ä»£ç†å¯¹ï¼Œå…¶ä¸­ç¬¬ä¸€ä¸ªä»£ç†å­—ç¬¦çš„èŒƒå›´ä» U+D800 åˆ° U+DBFFï¼Œç¬¬äºŒä¸ªä»£ç†å­—ç¬¦çš„èŒƒå›´ä» U+DC00 åˆ° U+DFFFã€‚")]),t._v(" "),n("p",[t._v("å¦å¤–éœ€è¦è¯´æ˜çš„æ˜¯ï¼Œæœ€å¼€å§‹çš„ 2^16 é‚£äº›æ•°æ®ä¸­å¹¶ééƒ½æ˜ å°„æ»¡äº†ã€‚ä» U+D800ï¼ˆ55296ï¼‰ åˆ° U+DFFFï¼ˆ57343ï¼‰å…± 2048 ä¸ªç ä½ï¼Œæ˜¯æ°¸ä¹…ä¿ç•™çš„ï¼Œä¸æ˜ å°„åˆ°ä»»ä½• Unicode å­—ç¬¦ã€‚å®ƒçš„å­˜åœ¨ä¸º UTF-16 æä¾›äº†æ–¹ä¾¿ã€‚")]),t._v(" "),n("p",[t._v("ä¸¾ä¾‹æ¥è¯´ï¼Œå­—ç¬¦ ğŸ˜‚ çš„ç ä½æ˜¯ U+1F602(128514)ï¼Œå¤§äº 65535ï¼Œå› æ­¤æ˜¯åæ·»åŠ çš„å­—ç¬¦ã€‚")]),t._v(" "),n("p",[t._v("é¦–å…ˆç”¨å®ƒå…ˆå‡å» 65536ï¼Œå¾—åˆ° 62978ï¼Œå¯¹åº”çš„äºŒè¿›åˆ¶æ˜¯ 1111011000000010ã€‚\nç„¶åå·¦è¡¥å…… 0 è‡³ 20 ä½ï¼š00001111011000000010ã€‚\nå†ä»ä¸­é—´åˆ‡æ–­æˆä¸Šä¸‹ä¸¤å€¼ï¼š0000111101ï¼ˆ61ï¼‰ å’Œ 1000000010ï¼ˆ514ï¼‰ã€‚\næ·»åŠ  0xD800ï¼ˆ55296ï¼‰åˆ°ä¸Šå€¼ï¼Œä»¥å½¢æˆé«˜ä½ï¼š55296 + 61 = 55357ï¼ˆ0xD83Dï¼‰ã€‚\næ·»åŠ  0xDC00ï¼ˆ56320ï¼‰åˆ°ä¸‹å€¼ï¼Œä»¥å½¢æˆä½ä½ï¼š56320+ 514 = 56834ï¼ˆ0xDE02ï¼‰ã€‚\n0xD83D ä¸ 0xDE02 æ„æˆä¸€ä¸ªä»£ç†å¯¹ï¼Œæ¥è¡¨ç¤ºç ä½ U+1F602ã€‚\nå¯ä»¥éªŒè¯å¦‚ä¸‹ï¼š")]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ğŸ˜‚'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("charCodeAt")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 55357")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ğŸ˜‚'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("charCodeAt")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 56834")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'\\u{1F602}'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ğŸ˜‚")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'\\uD83D\\uDE02'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ")]),t._v("\nğŸ˜‚"),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'\\u{1F602}'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'\\uD83D'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// true")]),t._v("\n")])])]),n("p",[t._v("æ­¤æ—¶ï¼Œæƒ³å¿…ä½ ä¹Ÿæ˜ç™½äº†æ–‡ç« å¼€å¤´çš„é—®é¢˜äº†ï¼š'ğŸ˜‚'.length ä¹‹æ‰€ä»¥ä¸º 2ï¼Œæ˜¯å› ä¸º JS è‡³ä»Šä»ç„¶ä½¿ç”¨ UCS-2 é‚£ç§ 16 è¿›åˆ¶è¯»å–æ–¹å¼ã€‚")]),t._v(" "),n("h2",{attrs:{id:"å®ç°-getcodepoint"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å®ç°-getcodepoint"}},[t._v("#")]),t._v(" å®ç° getCodePoint")]),t._v(" "),n("p",[t._v("ç†è§£äº†ä»£ç†å¯¹ï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ charCodeAt å®ç° getCodePoint äº†ï¼š")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("function getCodePoint(str, idx = 0) {\n  const code = str.charCodeAt(idx);\n  if(code >= 0xD800 && code <= 0xDBFF) {\n    const high = code;\n    const low = str.charCodeAt(idx + 1);\n    return ((high - 0xD800) * 0x400) +\n      (low - 0xDC00) + 0x10000;\n  }\n  return code;\n}\n\nconsole.log(getCodePoint('ä¸­')); // 20013\nconsole.log(getCodePoint('ğŸ€„')); // 126980\n")])])]),n("p",[t._v("åŒæ ·åœ°ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡ fromCharCode å®ç° fromCodePoint:")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("function fromCodePoint(...codePoints) {\n  let str = '';\n  for(let i = 0; i < codePoints.length; i++) {\n    let codePoint = codePoints[i];\n    if(codePoint <= 0xFFFF) {\n      str += String.fromCharCode(codePoint);\n    } else {\n      codePoint -= 0x10000;\n      const high = (codePoint >> 10) + 0xD800;\n      const low = (codePoint % 0x400) + 0xDC00;\n      str += String.fromCharCode(high) + String.fromCharCode(low);\n    }\n  }\n  return str;\n}\n\nconsole.log(fromCodePoint(126980, 20013)); // ğŸ€„ä¸­\n")])])]),n("p",[t._v("æ‰€ä»¥æˆ‘ä»¬å°±å¯ä»¥ç”¨ä¸Šé¢è¿™æ ·çš„æ€è·¯æ¥å®ç°æ—©æœŸæµè§ˆå™¨ä¸‹çš„ polyfillã€‚å®é™…ä¸Š MDN å®˜æ–¹å¯¹"),n("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/codePointAt",target:"_blank",rel:"noopener noreferrer"}},[t._v("codePointAt"),n("OutboundLink")],1),t._v("å’Œ"),n("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String/fromCodePoint",target:"_blank",rel:"noopener noreferrer"}},[t._v("fromCodePoint"),n("OutboundLink")],1),t._v("çš„è¯´æ˜ä¸­ï¼Œå°±æŒ‰ç…§ä¸Šé¢çš„æ€è·¯æä¾›äº†å¯¹åº”çš„ polyfill æ–¹æ³•ã€‚")]),t._v(" "),n("h2",{attrs:{id:"getcodepointcount"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#getcodepointcount"}},[t._v("#")]),t._v(" getCodePointCount")]),t._v(" "),n("p",[t._v("JavaScript å­—ç¬¦ä¸²çš„ length åªèƒ½è·å¾— UTF-16 å­—ç¬¦çš„ä¸ªæ•°ï¼Œæ‰€ä»¥å‰é¢çœ‹åˆ°çš„ï¼š")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("console.log('ğŸ€„'.length); // å­—ç¬¦ä¸²é•¿åº¦ä¸º2\n")])])]),n("p",[t._v("è¦è·å¾— Unicode å­—ç¬¦æ•°ï¼Œæœ‰å‡ ä¸ªåŠæ³•ï¼Œæ¯”å¦‚ä½¿ç”¨ spread æ“ä½œæ˜¯å¯ä»¥æ”¯æŒ Unicode å­—ç¬¦ä¸²è½¬æ•°ç»„çš„ï¼Œæ‰€ä»¥ï¼š")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("function getCodePointCount(str) {\n  return [...str].length;\n}\nconsole.log(getCodePointCount('ğŸ‘«ä¸­'));\næˆ–è€…ä½¿ç”¨å¸¦æœ‰uæè¿°ç¬¦çš„æ­£åˆ™è¡¨è¾¾å¼ï¼š\n\nfunction getCodePointCount(str) {\n  let result = str.match(/./gu);\n  return result ? result.length : 0;\n}\nconsole.log(getCodePointCount('ğŸ‘«ä¸­'));\n")])])]),n("h2",{attrs:{id:"æ‰©å±•"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æ‰©å±•"}},[t._v("#")]),t._v(" æ‰©å±•")]),t._v(" "),n("p",[t._v("Unicode ç ä½ä½¿ç”¨å›ºå®šçš„ 4 ä¸ªå­—èŠ‚æ¥ç¼–ç å¢è¡¥å­—ç¬¦ï¼Œè€Œæ—©æœŸï¼ŒUTF-8 ç¼–ç åˆ™é‡‡ç”¨å¯å˜çš„ 1~6 ä¸ªå­—èŠ‚æ¥ç¼–ç  Unicode å­—ç¬¦ã€‚")]),t._v(" "),n("p",[t._v("UTF-8 ç¼–ç æ–¹å¼å¦‚ä¸‹ï¼š")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",[t._v("å­—èŠ‚")]),t._v(" "),n("th",[t._v("èµ·å§‹")]),t._v(" "),n("th",[t._v("ç»ˆæ­¢")]),t._v(" "),n("th",[t._v("byte1")]),t._v(" "),n("th",[t._v("byte2")]),t._v(" "),n("th",[t._v("byte3")]),t._v(" "),n("th",[t._v("byte4")]),t._v(" "),n("th",[t._v("byte5")]),t._v(" "),n("th",[t._v("byte6")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[t._v("1")]),t._v(" "),n("td",[t._v("U+0000")]),t._v(" "),n("td",[t._v("U+007F")]),t._v(" "),n("td",[t._v("0xxxxxxx")]),t._v(" "),n("td"),t._v(" "),n("td"),t._v(" "),n("td"),t._v(" "),n("td"),t._v(" "),n("td")]),t._v(" "),n("tr",[n("td",[t._v("2")]),t._v(" "),n("td",[t._v("U+0080")]),t._v(" "),n("td",[t._v("U+07FF")]),t._v(" "),n("td",[t._v("110xxxxx")]),t._v(" "),n("td",[t._v("10xxxxxx")]),t._v(" "),n("td"),t._v(" "),n("td"),t._v(" "),n("td"),t._v(" "),n("td")]),t._v(" "),n("tr",[n("td",[t._v("3")]),t._v(" "),n("td",[t._v("U+0800")]),t._v(" "),n("td",[t._v("U+FFFF")]),t._v(" "),n("td",[t._v("1110xxxx")]),t._v(" "),n("td",[t._v("10xxxxxx")]),t._v(" "),n("td",[t._v("10xxxxxx")]),t._v(" "),n("td"),t._v(" "),n("td"),t._v(" "),n("td")]),t._v(" "),n("tr",[n("td",[t._v("4")]),t._v(" "),n("td",[t._v("U+10000")]),t._v(" "),n("td",[t._v("U+1FFFFF")]),t._v(" "),n("td",[t._v("11110xxx")]),t._v(" "),n("td",[t._v("10xxxxxx")]),t._v(" "),n("td"),t._v(" "),n("td",[t._v("10xxxxxx")]),t._v(" "),n("td",[t._v("10xxxxxx")]),t._v(" "),n("td")]),t._v(" "),n("tr",[n("td",[t._v("5")]),t._v(" "),n("td",[t._v("U+200000")]),t._v(" "),n("td",[t._v("U+3FFFFFF")]),t._v(" "),n("td",[t._v("111110xx")]),t._v(" "),n("td",[t._v("10xxxxxx")]),t._v(" "),n("td",[t._v("10xxxxxx")]),t._v(" "),n("td",[t._v("10xxxxxx")]),t._v(" "),n("td",[t._v("10xxxxxx")]),t._v(" "),n("td")]),t._v(" "),n("tr",[n("td",[t._v("6")]),t._v(" "),n("td",[t._v("U+4000000")]),t._v(" "),n("td",[t._v("U+7FFFFFFF")]),t._v(" "),n("td",[t._v("1111110x")]),t._v(" "),n("td",[t._v("10xxxxxx")]),t._v(" "),n("td",[t._v("10xxxxxx")]),t._v(" "),n("td",[t._v("10xxxxxx")]),t._v(" "),n("td",[t._v("10xxxxxx")]),t._v(" "),n("td",[t._v("10xxxxxx")])])])]),t._v(" "),n("p",[t._v("åœ¨æµè§ˆå™¨çš„encodeURIComponentå’ŒNodeçš„Bufferé»˜è®¤é‡‡ç”¨UTF-8ç¼–ç ï¼š")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("console.log(encodeURIComponent('ä¸­')); // %E4%B8%AD\nconst buffer = new Buffer('ä¸­');\nconsole.log(buffer); // <Buffer e4 b8 ad>\n")])])]),n("p",[t._v("è¿™é‡Œçš„E4ã€B8ã€ADå°±æ˜¯ä¸‰ä¸ªå­—èŠ‚çš„åå…­è¿›ç¼–ç ï¼Œæˆ‘ä»¬è¯•ç€è½¬ä¸€ä¸‹ï¼š")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("const byte1 = parseInt('E4', 16); // 228\nconst byte2 = parseInt('B8', 16); // 184\nconst byte3 = parseInt('AD', 16); // 173\n\nconst codePoint = (byte1 & 0xf) << 12 | (byte2 & 0x3f) << 6 | (byte3 & 0x3f);\n\nconsole.log(codePoint); // 20013\n")])])]),n("p",[t._v("æˆ‘ä»¬å°†ä¸‰ä¸ªå­—èŠ‚çš„æ§åˆ¶ç 1110ã€10ã€10åˆ†åˆ«å»æ‰ï¼Œç„¶åå°†å®ƒä»¬æŒ‰ç…§ä»é«˜ä½åˆ°ä½ä½çš„é¡ºåºæ‹¼æ¥èµ·æ¥ï¼Œæ­£å¥½å°±å¾—åˆ°'ä¸­'çš„ç ä½20013ã€‚")]),t._v(" "),n("p",[t._v("æ‰€ä»¥æˆ‘ä»¬ä¹Ÿå¯ä»¥åˆ©ç”¨UTF-8ç¼–ç è§„åˆ™ï¼Œå†™å¦ä¸€ä¸ªç‰ˆæœ¬çš„é€šç”¨æ–¹æ³•æ¥å®ç°getCodePointï¼š")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("function getCodePoint(char) {\n  const code = char.charCodeAt(0);\n  if(code <= 0x7f) return code;\n  const bytes = encodeURIComponent(char)\n    .slice(1)\n    .split('%')\n    .map(c => parseInt(c, 16));\n  \n  let ret = 0;\n  const len = bytes.length;\n  for(let i = 0; i < len; i++) {\n    if(i === 0) {\n      ret |= (bytes[i] & 0xf) << 6 * (len - i - 1);\n    } else {\n      ret |= (bytes[i] & 0x3f) << 6 * (len - i - 1);\n    }\n  }\n  return ret;\n}\n\nconsole.log(getCodePoint('ä¸­')); // 20013\nconsole.log(getCodePoint('ğŸ€„')); // 126980\n")])])]),n("p",[t._v("é‚£ä¹ˆåŒæ ·ï¼Œæˆ‘ä»¬å¯ä»¥å®ç°fromCodePointï¼š")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("function fromCodePoint(point) {\n  if(point <= 0xffff) return String.fromCharCode(point);\n  const bytes = [];\n  bytes.unshift(point & 0x3f | 0x80);\n  point >>>= 6;\n  bytes.unshift(point & 0x3f | 0x80);\n  point >>>= 6;\n  bytes.unshift(point & 0x3f | 0x80);\n  point >>>= 6;\n  if(point < 0x1FFFFF) {\n    bytes.unshift(point & 0x7 | 0xf0);\n  } else if(point < 0x3FFFFFF) {\n    bytes.unshift(point & 0x3f | 0x80);\n    point >>>= 6;\n    bytes.unshift(point & 0x3 | 0xf8);\n  } else {\n    bytes.unshift(point & 0x3f | 0x80);\n    point >>>= 6;\n    bytes.unshift(point & 0x3f | 0x80);\n    point >>>= 6;\n    bytes.unshift(point & 0x1 | 0xfc);\n  }\n  const code = '%' + bytes.map(b => b.toString(16)).join('%');\n  return decodeURIComponent(code);\n}\n\nconsole.log(fromCodePoint(126980)); // ğŸ€„\n")])])]),n("h2",{attrs:{id:"æ–‡çŒ®"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æ–‡çŒ®"}},[t._v("#")]),t._v(" æ–‡çŒ®")]),t._v(" "),n("p",[t._v("æœ€åï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ JS è§„èŒƒã€ŠEcma-262ã€‹ å¯¹æ­¤çš„æè¿°ï¼š")]),t._v(" "),n("blockquote",[n("p",[t._v("The String type is the set of all ordered sequences of zero or more 16-bit unsigned integer values (â€œelementsâ€) up to amaximum length of 25^3 - 1 elements. The String type is generally used to represent textual data in a running ECMAScript program, in which case each element in the String is treated as a UTF-16 code unit value. Each element is regarded as occupying a position within the sequence. These positions are indexed with nonnegative integers. The first element (if any) is at index 0, the next element (if any) at index 1, and so on. The length of a String is the number of elements (i.e., 16-bit values) within it. The empty String has length zero and therefore contains no elements.")])]),t._v(" "),n("blockquote",[n("p",[t._v("ECMAScript operations that do not interpret String contents apply no further semantics. Operations that do interpret String values treat each element as a single UTF-16 code unit. However, ECMAScript does not restrict the value of or relationships between these code units, so operations that further interpret String contents as sequences of Unicode code points encoded in UTF-16 must account for ill-formed subsequences. Such operations apply special treatment to every code unit with a numeric value in the inclusive range 0xD800 to 0xDBFF (defined by the Unicode Standard as a leading surrogate, or more formally as a high-surrogate code unit) and every code unit with a numeric value in the inclusive range 0xDC00 to 0xDFFF (defined as a trailing surrogate, or more formally as a low-surrogate code unit) using the following rules:")])]),t._v(" "),n("blockquote",[n("p",[t._v("A code unit that is not a leading surrogate and not a trailing surrogate is interpreted as a code point with the same value.")])]),t._v(" "),n("blockquote",[n("p",[t._v("A sequence of two code units, where the first code unit c1 is a leading surrogate and the second code unit c2 a trailing surrogate, is a surrogate pair and is interpreted as a code point with the value (c1 - 0xD800) Ã— 0x400 + (c2 - 0xDC00) + 0x10000. (See 10.1.2)")])]),t._v(" "),n("blockquote",[n("p",[t._v("A code unit that is a leading surrogate or trailing surrogate, but is not part of a surrogate pair, is interpreted as a code point with the same value.")])]),t._v(" "),n("p",[t._v("ç¿»è¯‘å¦‚ä¸‹ï¼š")]),t._v(" "),n("blockquote",[n("p",[t._v("å­—ç¬¦ä¸²ç±»å‹æ˜¯é›¶ä¸ªæˆ–å¤šä¸ª 16 ä½æ— ç¬¦å·æ•´æ•°å€¼ï¼ˆâ€œå…ƒç´ â€ï¼‰çš„æ‰€æœ‰æœ‰åºåºåˆ—çš„é›†åˆï¼Œæœ€å¤§é•¿åº¦ä¸º 25^3-1 ä¸ªå…ƒç´ ã€‚å­—ç¬¦ä¸²ç±»å‹é€šå¸¸ç”¨äºè¡¨ç¤ºæ­£åœ¨è¿è¡Œçš„ ECMAScript ç¨‹åºä¸­çš„æ–‡æœ¬æ•°æ®ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå­—ç¬¦ä¸²ä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½è¢«è§†ä¸º UTF-16 ä»£ç å•å…ƒå€¼ã€‚ æ¯ä¸ªå…ƒç´ è¢«è®¤ä¸ºåœ¨åºåˆ—ä¸­å æ®ä¸€ä¸ªä½ç½®ã€‚è¿™äº›ä½ç½®ç”¨éè´Ÿæ•´æ•°ç´¢å¼•ã€‚ç¬¬ä¸€ä¸ªå…ƒç´ ï¼ˆå¦‚æœæœ‰ï¼‰ä½äºç´¢å¼• 0ï¼Œä¸‹ä¸€ä¸ªå…ƒç´ ï¼ˆå¦‚æœæœ‰ï¼‰ä½äºç´¢å¼• 1ï¼Œä¾æ­¤ç±»æ¨ã€‚å­—ç¬¦ä¸²çš„é•¿åº¦æ˜¯å…¶ä¸­çš„å…ƒç´ æ•°ï¼ˆå³ 16 ä½å€¼ï¼‰ã€‚ç©ºå­—ç¬¦ä¸²çš„é•¿åº¦ä¸ºé›¶ï¼Œå› æ­¤ä¸åŒ…å«ä»»ä½•å…ƒç´ ã€‚")])]),t._v(" "),n("blockquote",[n("p",[t._v("ä¸è§£é‡Šå­—ç¬¦ä¸²å†…å®¹çš„ ECMAScript æ“ä½œä¸å†åº”ç”¨ä»»ä½•è¯­ä¹‰ã€‚è§£é‡Šå­—ç¬¦ä¸²å€¼çš„æ“ä½œå°†æ¯ä¸ªå…ƒç´ è§†ä¸ºå•ä¸ª UTF-16 ä»£ç å•å…ƒã€‚ä½†æ˜¯ï¼ŒECMAScript å¹¶ä¸é™åˆ¶è¿™äº›ä»£ç å•å…ƒçš„å€¼æˆ–å®ƒä»¬ä¹‹é—´çš„å…³ç³»ï¼Œå› æ­¤ï¼Œå°† String å†…å®¹è¿›ä¸€æ­¥è§£é‡Šä¸º UTF-16 ç¼–ç çš„ Unicode ä»£ç ç‚¹åºåˆ—çš„æ“ä½œå¿…é¡»è€ƒè™‘æ ¼å¼é”™è¯¯çš„å­åºåˆ—ã€‚æ­¤ç±»æ“ä½œä¼šå¯¹æ•°å­—å€¼åœ¨ 0xD800 åˆ° 0xDBFFï¼ˆç”± Unicode æ ‡å‡†å®šä¹‰ä¸ºé¢†å…ˆä»£ç†ï¼Œæˆ–æ›´æ­£å¼åœ°ä½œä¸ºé«˜ä»£ç†ä»£ç å•å…ƒï¼‰èŒƒå›´å†…çš„æ¯ä¸ªä»£ç å•å…ƒå’Œæ¯ä¸ªå…·æœ‰æ•°å­—å€¼çš„ä»£ç å•å…ƒè¿›è¡Œç‰¹æ®Šå¤„ç†ã€‚ä½¿ç”¨ä»¥ä¸‹è§„åˆ™åœ¨ 0xDC00 åˆ° 0xDFFFï¼ˆåŒ…æ‹¬å°¾éšä»£ç†ï¼Œæˆ–æ›´æ­£å¼åœ°å®šä¹‰ä¸ºä½ä»£ç†ä»£ç å•å…ƒï¼‰çš„èŒƒå›´å†…ï¼š")])]),t._v(" "),n("blockquote",[n("p",[t._v("ä¸æ˜¯å‰å¯¼ä»£ç†ä¹Ÿä¸æ˜¯å°¾éšä»£ç†çš„ä»£ç å•å…ƒè¢«è§£é‡Šä¸ºå…·æœ‰ç›¸åŒå€¼çš„ä»£ç ç‚¹ã€‚")])]),t._v(" "),n("blockquote",[n("p",[t._v("ä¸¤ä¸ªä»£ç å•å…ƒçš„åºåˆ—ï¼Œå…¶ä¸­ç¬¬ä¸€ä¸ªä»£ç å•å…ƒ c1 æ˜¯å‰å¯¼ä»£ç†ï¼Œç¬¬äºŒä¸ªä»£ç å•å…ƒ c2 æ˜¯å°¾éšä»£ç†ï¼Œæ˜¯ä¸€ä¸ªä»£ç†å¯¹ï¼Œå¹¶è¢«è§£é‡Šä¸ºå€¼ï¼ˆc1-0xD800ï¼‰Ã—0x400 +ï¼ˆ c2-0xDC00ï¼‰+ 0x10000ã€‚ ï¼ˆè¯·å‚è§ 10.1.2ï¼‰")])]),t._v(" "),n("blockquote",[n("p",[t._v("ä½œä¸ºå‰å¯¼ä»£ç†æˆ–å°¾éšä»£ç†ä½†ä¸å±äºä»£ç†å¯¹çš„ä»£ç å•å…ƒï¼Œå°†è¢«è§£é‡Šä¸ºå…·æœ‰ç›¸åŒå€¼çš„ä»£ç ç‚¹ã€‚")])]),t._v(" "),n("h2",{attrs:{id:"surrogate-pair"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#surrogate-pair"}},[t._v("#")]),t._v(" surrogate pair")]),t._v(" "),n("p",[t._v("è¿™é‡Œé¢æœ‰ä¸¤ä¸ªå¾ˆé‡è¦çš„æœ¯è¯­ï¼š")]),t._v(" "),n("ul",[n("li",[t._v("code point: æŒ‡ Unicode æ ‡å‡†é‡Œâ€œå­—ç¬¦â€çš„ç¼–å·ï¼Œç›®å‰ Unicode ä½¿ç”¨äº† 0 ~ 0x10FFFF çš„ç¼–ç èŒƒå›´ã€‚è¿™é‡Œå­—ç¬¦äºŒå­—åŠ äº†å¼•å·ï¼Œæ˜¯å› ä¸ºè¿™ä¸ªæ¦‚å¿µå¾ˆæ··æ·†ï¼Œåé¢ä¼šå†è®²è¿°ã€‚")]),t._v(" "),n("li",[t._v("code unit: æŒ‡æŸç§ Unicode ç¼–ç æ–¹å¼é‡Œç¼–ç ä¸€ä¸ª code point éœ€è¦çš„æœ€å°‘å­—èŠ‚æ•°ï¼Œæ¯”å¦‚ UTF-8 éœ€è¦æœ€å°‘ä¸€ä¸ªå­—èŠ‚ï¼ŒUTF-16 æœ€å°‘ä¸¤ä¸ªå­—èŠ‚ï¼ŒUCS-2 ä¸¤ä¸ªå­—èŠ‚ï¼ŒUCS-4 å’Œ UTF-32 å››ä¸ªå­—èŠ‚ï¼Œåé¢ä¸‰ä¸ªæ˜¯å®šé•¿ç¼–ç ã€‚")])]),t._v(" "),n("p",[t._v("æ—©æœŸçš„æ—¶å€™ï¼ŒUnicode åªç”¨åˆ°äº† 0~0xFFFF èŒƒå›´çš„æ•°å­—ç¼–ç ï¼Œè¿™å°±æ˜¯ BMP å­—ç¬¦é›†ï¼ŒUCS-2 ç¼–ç ï¼Œå¾ˆå¤šè¯­è¨€å°±ç”¨ 2 bytes æ¥è¡¨ç¤º wchar_t æˆ–è€… charï¼Œå…¸å‹çš„ä¾‹å­æ˜¯ C/C++/Javaã€‚ä½†åæ¥ Unicode ç»„ç»‡èƒ¡æçæå±…ç„¶ç”¨åˆ°äº†è¶…è¿‡è¿™ä¸ªèŒƒå›´çš„æ•°å­—ï¼Œäºæ˜¯å°±å‡ºæ¥ surrogate pair çš„æ¦‚å¿µäº†ã€‚")]),t._v(" "),n("p",[t._v("Surrogate pair æ˜¯ä¸“é—¨ç”¨äº UTF-16 çš„ï¼Œä»¥å‘åå…¼å®¹ UCS-2ï¼Œåšæ³•æ˜¯å– UCS-2 èŒƒå›´é‡Œçš„ 0xD800~0xDBFF(ç§°ä¸º high surrogates) å’Œ 0xDC00~0xDFFF(ç§°ä¸º low surrogates) çš„ code pointï¼Œä¸€ä¸ª high surrogate æ¥ä¸€ä¸ª low surrogate æ‹¼æˆå››ä¸ªå­—èŠ‚è¡¨ç¤ºè¶…å‡º BMP çš„å­—ç¬¦ï¼Œä¸¤ä¸ª surrogate range éƒ½æ˜¯ 1024 ä¸ª code pointï¼Œæ‰€ä»¥ surrogate pair å¯ä»¥è¡¨è¾¾ 1024 x 1024 = 1048576 = 0x100000 ä¸ªå­—ç¬¦ï¼Œè¿™å°±æ˜¯ Unicode çš„å­—ç¬¦é›†èŒƒå›´ä¸Šé™æ˜¯ 0x10FFFF çš„åŸå› ï¼Œä¸ºäº†ç…§é¡¾ UTF-16 ä»¥åŠä¸€å¤§å †é‡‡ç”¨äº† UTF-16 çš„è¯­è¨€ã€æ“ä½œç³»ç»Ÿï¼ˆæ¯”å¦‚ Windowsï¼‰ï¼Œè¿™ä¸ªä¸Šé™ä¸èƒ½çªç ´ï¼Œå“ªæ€• UTF-8 å’Œ UTF-32 å¯ä»¥ç¼–ç æ›´å¤§çš„èŒƒå›´ï¼Œå®åœ¨æ˜¯å†å²æ‚²å‰§ï¼")]),t._v(" "),n("p",[t._v("å…¶ä¸­æåˆ°äº†ç å…ƒï¼ˆcode unitï¼‰ï¼Œæ˜¯æŒ‡æœ€å­˜å‚¨çš„æœ€å°å•ä½ï¼Œè¿™é‡Œå³ 2 ä¸ªå­—èŠ‚ã€‚")]),t._v(" "),n("p",[t._v("å‰æ–‡è®¨è®ºè¿‡ï¼Œå¤§äº 65535 çš„ç ä½ä¼šç”Ÿæˆä¸€ä¸ªä»£ç†å¯¹ï¼ˆæ¯”å¦‚ ğŸ˜‚ çš„ç ä½æ˜¯ U+1F602ï¼Œä»£ç†å¯¹æ˜¯ U+D83D å’Œ U+DE02ï¼‰ï¼Œå³ç”¨äº† 2 ä¸ªç å…ƒã€‚ä¸Šè¿° JS è§„èŒƒä¸­æ˜ç¡®å¾—æŒ‡å‡ºï¼šâ€œæ¯ä¸ªå…ƒç´ éƒ½è¢«è®¤ä¸ºæ˜¯ä¸€ä¸ªå•ç‹¬çš„ UTF-16 ç å…ƒâ€ã€‚å› æ­¤ ğŸ˜‚ ç¬¦å·ä¸º 2ã€‚")])])}),[],!1,null,null,null);e.default=s.exports}}]);